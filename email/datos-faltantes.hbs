<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Reporte de Datos Faltantes - ETL</title>
  </head>
  <body style="font-family: sans-serif; line-height: 1.5; color: #333;">
    <h2>Reporte de Datos Faltantes - ETL</h2>

    <p>
      Se ha completado el proceso ETL del d√≠a
      <strong>{{date}}</strong>.
      {{#if hasMissingData}}
        Se detectaron los siguientes datos faltantes que requieren atenci√≥n:
      {{else}}
        ‚úÖ No se detectaron datos faltantes.
      {{/if}}
    </p>

    {{#if hasMissingData}}
      {{#each obras}}
        <div
          style="margin: 20px 0; padding: 15px; background-color: #f5f5f5; border-left: 4px solid #ff9800;"
        >
          <h3 style="margin-top: 0;">üèóÔ∏è Obra: {{nombre}}</h3>

          {{#if horario.missing}}
            <div style="margin: 10px 0;">
              <strong>‚è∞ Horario:</strong>
              Datos de horario faltantes
            </div>
          {{/if}}

          {{#if salario.length}}
            <div style="margin: 10px 0;">
              <strong>üí∞ Salario:</strong>
              Faltante para los siguientes operadores:
              <ul style="margin: 5px 0;">
                {{#each salario}}
                  <li>{{this}}</li>
                {{/each}}
              </ul>
            </div>
          {{/if}}

          {{#if
            (or
              precioEquipo.hora.length
              precioEquipo.dia.length
              precioEquipo.viaje.length
            )
          }}
            <div style="margin: 10px 0;">
              <strong>üí≤ Precio Equipo:</strong>

              {{#if precioEquipo.hora.length}}
                <div style="margin-left: 20px; margin-top: 5px;">
                  <strong>üïê Por Hora:</strong>
                  Faltante para las siguientes etiquetas:
                  <ul style="margin: 5px 0;">
                    {{#each precioEquipo.hora}}
                      <li>{{this}}</li>
                    {{/each}}
                  </ul>
                </div>
              {{/if}}

              {{#if precioEquipo.dia.length}}
                <div style="margin-left: 20px; margin-top: 5px;">
                  <strong>üìÖ Por D√≠a:</strong>
                  Faltante para las siguientes etiquetas:
                  <ul style="margin: 5px 0;">
                    {{#each precioEquipo.dia}}
                      <li>{{this}}</li>
                    {{/each}}
                  </ul>
                </div>
              {{/if}}

              {{#if precioEquipo.viaje.length}}
                <div style="margin-left: 20px; margin-top: 5px;">
                  <strong>üöõ Por Viaje:</strong>
                  <ul style="margin: 5px 0;">
                    {{#each precioEquipo.viaje}}
                      <li><strong>{{destino}}:</strong> {{etiquetas}}</li>
                    {{/each}}
                  </ul>
                </div>
              {{/if}}
            </div>
          {{/if}}

          {{#if sinHoraFinal.length}}
            <div style="margin: 10px 0;">
              <strong>‚ö†Ô∏è Registros Sin Hora Final:</strong>
              <ul style="margin: 5px 0;">
                {{#each sinHoraFinal}}
                  <li>
                    <strong>Fecha {{fecha}}:</strong>
                    {{#each operadores}}{{this}}{{#unless @last}},
                      {{/unless}}{{/each}}
                  </li>
                {{/each}}
              </ul>
            </div>
          {{/if}}
        </div>
      {{/each}}

      <div
        style="margin-top: 30px; padding: 15px; background-color: #fff3cd; border-left: 4px solid #ffc107;"
      >
        <p style="margin: 0;">
          <strong>‚ö†Ô∏è Acci√≥n requerida:</strong>
          Por favor revisa y actualiza los datos faltantes en el sistema para
          garantizar la precisi√≥n de los reportes.
        </p>
      </div>
    {{/if}}

    <p style="margin-top: 2rem; color: #666;">
      Saludos,<br />
      El equipo de Dumpify, #ydnnsoft
    </p>
  </body>
</html>